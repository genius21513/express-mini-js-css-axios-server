const app={data:()=>({email:"",password:"",notification:{message:""},error:{title:"",message:""},notice:!1,alert:!1}),created(){vm=this,void 0!==localStorage.action&&(vm.notification.message=localStorage.action,localStorage.removeItem("action"),localStorage.removeItem("token"),Cookies.set("idx",""),vm.alert=!1,vm.notice=!0,setTimeout((()=>vm.notice=!1),2e4));const e=Cookies.get("defaultUsername"),t=Cookies.get("idx"),o=Cookies.get("defaultApp");t&&o?window.location.href="/app/"+o+"?m=login":e?vm.email=e:serverData.reason&&(vm.notification.message="You need to login to access the application.",vm.alert=!1,vm.notice=!0,setTimeout((()=>vm.notice=!1),2e4))},methods:{login(){vm=this,vm.alert=!1,axios.post("/login",{username:vm.email,password:vm.password}).then((function(e){vm.notice=!1,vm.alert=!1,localStorage.token=e.data.token,Cookies.set("idx",encodeURIComponent(e.data.token),{expires:7}),0===e.data.apps.length?(vm.error.title="Request failed",vm.error.message="Your user account does not yet have application permission set up.",vm.alert=!0,vm.notice=!1,setTimeout((()=>vm.alert=!1),2e4)):(Cookies.set("defaultUsername",vm.email,{expires:60}),Cookies.set("defaultApp",e.data.apps[0],{expires:60}),window.location.href="/app/"+e.data.apps[0])})).catch((function(e){vm.notice=!1,void 0!==e.response?(vm.error.title="Request failed",vm.error.message=e.response.data.message,console.log("aha")):(vm.error.title="Request failed",vm.error.message="Unable to login, please try again later."),vm.alert=!0,setTimeout((()=>vm.alert=!1),2e4)}))}}};Vue.createApp(app).mount("#login");